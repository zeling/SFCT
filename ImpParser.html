<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>ImpParser</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library ImpParser</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab454"></a><h1 class="section">ImpParser: 用Coq做词法分析和语法分析</h1>

<div class="paragraph"> </div>

 在Imp.v中设计<span class="inlinecode"><span class="id" title="library">Imp</span></span>语言时完全忽略了具体语法的问题 —— 如何把
    程序员可能写下的ascii字符串翻译成一棵由<span class="inlinecode"><a class="idref" href="Imp.html#aexp"><span class="id" title="inductive">aexp</span></a></span>，<span class="inlinecode"><a class="idref" href="Imp.html#bexp"><span class="id" title="inductive">bexp</span></a></span>，
    <span class="inlinecode"><a class="idref" href="Auto.html#Repeat.com"><span class="id" title="inductive">com</span></a></span>所定义的抽象语法树。在这个文件能我们将通过用Coq的
    函数式语言特性来构建一个简单的词法分析器和语法解析器，并回答
    之前的遗留问题。

<div class="paragraph"> </div>

    这一章读者可以不求甚解：本章解释都相当的简短并且也没什么
    练习题。主要的意义是为了演示我们能做什么。非常欢迎你通读
    这段代码 —— 大部分不那么复杂，尽管解析器依赖于某种"monadic"
    的编程风格，这可能需要你花点时间来理解 —— 大部分读者可以直接
    跳到末尾的例子部分弄懂这章做了什么。 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab455"></a><h1 class="section">内部结构</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="SfLib.html#"><span class="id" title="library">SfLib</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Imp.html#"><span class="id" title="library">Imp</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#"><span class="id" title="library">Ascii</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab456"></a><h2 class="section">词法分析</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="isWhite"><span class="id" title="definition">isWhite</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#nat_of_ascii"><span class="id" title="definition">nat_of_ascii</span></a> <a class="idref" href="ImpParser.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#orb"><span class="id" title="definition">orb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#orb"><span class="id" title="definition">orb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="definition">beq_nat</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> 32)   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="definition">beq_nat</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> 9))   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#orb"><span class="id" title="definition">orb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="definition">beq_nat</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> 10)   <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Arith.EqNat.html#beq_nat"><span class="id" title="definition">beq_nat</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> 13)). 
<br/>
<span class="id" title="keyword">Notation</span> <a name="01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&quot;</span></a>x &acute;&lt;=?&acute; y" := (<a class="idref" href="SfLib.html#ble_nat"><span class="id" title="definition">ble_nat</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">nat_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="isLowerAlpha"><span class="id" title="definition">isLowerAlpha</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#nat_of_ascii"><span class="id" title="definition">nat_of_ascii</span></a> <a class="idref" href="ImpParser.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#andb"><span class="id" title="definition">andb</span></a> (97 <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a>) (<a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> 122).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="isAlpha"><span class="id" title="definition">isAlpha</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#nat_of_ascii"><span class="id" title="definition">nat_of_ascii</span></a> <a class="idref" href="ImpParser.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#orb"><span class="id" title="definition">orb</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#andb"><span class="id" title="definition">andb</span></a> (65 <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a>) (<a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> 90))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#andb"><span class="id" title="definition">andb</span></a> (97 <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a>) (<a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> 122)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="isDigit"><span class="id" title="definition">isDigit</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#nat_of_ascii"><span class="id" title="definition">nat_of_ascii</span></a> <a class="idref" href="ImpParser.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#andb"><span class="id" title="definition">andb</span></a> (48 <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a>) (<a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="ImpParser.html#01f84f7b4db7ca25b5fbdf8f04a7bebc"><span class="id" title="notation">&lt;=?</span></a> 57).<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a name="chartype"><span class="id" title="inductive">chartype</span></a> := <a name="white"><span class="id" title="constructor">white</span></a> | <a name="alpha"><span class="id" title="constructor">alpha</span></a> | <a name="digit"><span class="id" title="constructor">digit</span></a> | <a name="other"><span class="id" title="constructor">other</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="classifyChar"><span class="id" title="definition">classifyChar</span></a> (<span class="id" title="var">c</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) : <a class="idref" href="ImpParser.html#chartype"><span class="id" title="inductive">chartype</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="ImpParser.html#isWhite"><span class="id" title="definition">isWhite</span></a> <a class="idref" href="ImpParser.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">then</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#white"><span class="id" title="constructor">white</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <a class="idref" href="ImpParser.html#isAlpha"><span class="id" title="definition">isAlpha</span></a> <a class="idref" href="ImpParser.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#alpha"><span class="id" title="constructor">alpha</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="id" title="keyword">if</span> <a class="idref" href="ImpParser.html#isDigit"><span class="id" title="definition">isDigit</span></a> <a class="idref" href="ImpParser.html#c"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#digit"><span class="id" title="constructor">digit</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#other"><span class="id" title="constructor">other</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="list_of_string"><span class="id" title="definition">list_of_string</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#EmptyString"><span class="id" title="constructor">EmptyString</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#String"><span class="id" title="constructor">String</span></a> <span class="id" title="var">c</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">(</span></a><a class="idref" href="ImpParser.html#list_of_string"><span class="id" title="definition">list_of_string</span></a> <a class="idref" href="ImpParser.html#s"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="string_of_list"><span class="id" title="definition">string_of_list</span></a> (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#String"><span class="id" title="constructor">String</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#EmptyString"><span class="id" title="constructor">EmptyString</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="token"><span class="id" title="definition">token</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> (<span class="id" title="var">cls</span> : <a class="idref" href="ImpParser.html#chartype"><span class="id" title="inductive">chartype</span></a>) (<span class="id" title="var">acc</span> <span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#ascii"><span class="id" title="inductive">ascii</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tk</span> := <span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#acc"><span class="id" title="variable">acc</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> | <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="ImpParser.html#acc"><span class="id" title="variable">acc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">]</span></a> <span class="id" title="keyword">end</span> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="ImpParser.html#tk"><span class="id" title="variable">tk</span></a><br/>
&nbsp;&nbsp;| (<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">xs&acute;</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#cls"><span class="id" title="variable">cls</span></a>, <a class="idref" href="ImpParser.html#classifyChar"><span class="id" title="definition">classifyChar</span></a> <a class="idref" href="ImpParser.html#x"><span class="id" title="variable">x</span></a>, <span class="id" title="var">x</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, "("      ⇒ <a class="idref" href="ImpParser.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">[</span></a>"("<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::(</span></a><a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <a class="idref" href="ImpParser.html#other"><span class="id" title="constructor">other</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> <span class="id" title="var">xs&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, ")"      ⇒ <a class="idref" href="ImpParser.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">[</span></a>")"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::(</span></a><a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <a class="idref" href="ImpParser.html#other"><span class="id" title="constructor">other</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> <span class="id" title="var">xs&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="ImpParser.html#white"><span class="id" title="constructor">white</span></a>, <span class="id" title="var">_</span>    ⇒ <a class="idref" href="ImpParser.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <a class="idref" href="ImpParser.html#white"><span class="id" title="constructor">white</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> <span class="id" title="var">xs&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ImpParser.html#alpha"><span class="id" title="constructor">alpha</span></a>,<a class="idref" href="ImpParser.html#alpha"><span class="id" title="constructor">alpha</span></a>,<span class="id" title="var">x</span>  ⇒ <a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <a class="idref" href="ImpParser.html#alpha"><span class="id" title="constructor">alpha</span></a> (<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="ImpParser.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="var">xs&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ImpParser.html#digit"><span class="id" title="constructor">digit</span></a>,<a class="idref" href="ImpParser.html#digit"><span class="id" title="constructor">digit</span></a>,<span class="id" title="var">x</span>  ⇒ <a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <a class="idref" href="ImpParser.html#digit"><span class="id" title="constructor">digit</span></a> (<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="ImpParser.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="var">xs&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ImpParser.html#other"><span class="id" title="constructor">other</span></a>,<a class="idref" href="ImpParser.html#other"><span class="id" title="constructor">other</span></a>,<span class="id" title="var">x</span>  ⇒ <a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <a class="idref" href="ImpParser.html#other"><span class="id" title="constructor">other</span></a> (<span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="ImpParser.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="var">xs&acute;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>,<span class="id" title="var">tp</span>,<span class="id" title="var">x</span>         ⇒ <a class="idref" href="ImpParser.html#tk"><span class="id" title="variable">tk</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <span class="id" title="var">tp</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">]</span></a> <span class="id" title="var">xs&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span> %<span class="id" title="var">char</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="tokenize"><span class="id" title="definition">tokenize</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="ImpParser.html#string_of_list"><span class="id" title="definition">string_of_list</span></a> (<a class="idref" href="ImpParser.html#tokenize_helper"><span class="id" title="definition">tokenize_helper</span></a> <a class="idref" href="ImpParser.html#white"><span class="id" title="constructor">white</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> (<a class="idref" href="ImpParser.html#list_of_string"><span class="id" title="definition">list_of_string</span></a> <a class="idref" href="ImpParser.html#s"><span class="id" title="variable">s</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Example</span> <a name="tokenize_ex1"><span class="id" title="definition">tokenize_ex1</span></a> : <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#tokenize"><span class="id" title="definition">tokenize</span></a> "abc12==3  223*(3+(a+c))" %<span class="id" title="var">string</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">[</span></a>"abc"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "12"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "=="<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "3"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "223"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"*"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "("<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "3"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "+"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "("<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"a"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "+"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> "c"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> ")"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">;</span></a> ")"<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#ca01241a0c3f7016e6e2a252e5d50788"><span class="id" title="notation">]</span></a>%<span class="id" title="var">string</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab457"></a><h2 class="section">解析</h2>

</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab458"></a><h3 class="section">出错后的备选</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="optionE"><span class="id" title="inductive">optionE</span></a> (<span class="id" title="var">X</span>:<span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="SomeE"><span class="id" title="constructor">SomeE</span></a> : <span class="id" title="var">X</span> → <a class="idref" href="ImpParser.html#optionE"><span class="id" title="inductive">optionE</span></a> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;| <a name="NoneE"><span class="id" title="constructor">NoneE</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> → <a class="idref" href="ImpParser.html#optionE"><span class="id" title="inductive">optionE</span></a> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Implicit Arguments</span> <a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> [[<span class="id" title="var">X</span>]].<br/>
<span class="id" title="keyword">Implicit Arguments</span> <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> [[<span class="id" title="var">X</span>]].<br/>

<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&quot;</span></a>&acute;DO&acute; ( x , y ) &lt;== e1 ; e2" <br/>
&nbsp;&nbsp;&nbsp;:= (<span class="id" title="keyword">match</span> <span class="id" title="var">e1</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> <span class="id" title="var">err</span> ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> <span class="id" title="var">err</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&quot;</span></a>&acute;DO&acute; ( x , y ) &lt;-- e1 ; e2 &acute;OR&acute; e3" <br/>
&nbsp;&nbsp;&nbsp;:= (<span class="id" title="keyword">match</span> <span class="id" title="var">e1</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">y</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="var">e2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> <span class="id" title="var">err</span> ⇒ <span class="id" title="var">e3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60, <span class="id" title="var">e2</span> <span class="id" title="tactic">at</span> <span class="id" title="var">next</span> <span class="id" title="keyword">level</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab459"></a><h3 class="section">符号表</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="build_symtable"><span class="id" title="definition">build_symtable</span></a> (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : (<a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a> → <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">xs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ImpParser.html#isLowerAlpha"><span class="id" title="definition">isLowerAlpha</span></a> (<a class="idref" href="ImpParser.html#list_of_string"><span class="id" title="definition">list_of_string</span></a> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string_dec"><span class="id" title="definition">string_dec</span></a> <a class="idref" href="ImpParser.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="var">x</span> <span class="id" title="keyword">then</span> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">else</span> (<a class="idref" href="ImpParser.html#build_symtable"><span class="id" title="definition">build_symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="ImpParser.html#s"><span class="id" title="variable">s</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="ImpParser.html#build_symtable"><span class="id" title="definition">build_symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab460"></a><h3 class="section">构造解析器的通用组合子</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="parser"><span class="id" title="definition">parser</span></a> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) := <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a> → <a class="idref" href="ImpParser.html#optionE"><span class="id" title="inductive">optionE</span></a> (<a class="idref" href="ImpParser.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="many_helper"><span class="id" title="definition">many_helper</span></a> {<span class="id" title="var">T</span>} (<span class="id" title="var">p</span> : <a class="idref" href="ImpParser.html#parser"><span class="id" title="definition">parser</span></a> <a class="idref" href="ImpParser.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">acc</span> <span class="id" title="var">steps</span> <span class="id" title="var">xs</span> :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a>, <a class="idref" href="ImpParser.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
| 0, <span class="id" title="var">_</span> ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
| <span class="id" title="var">_</span>, <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">((</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="ImpParser.html#acc"><span class="id" title="variable">acc</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">),</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span>, <a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">xs&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="ImpParser.html#many_helper"><span class="id" title="definition">many_helper</span></a> <a class="idref" href="ImpParser.html#p"><span class="id" title="variable">p</span></a> (<span class="id" title="var">t</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><a class="idref" href="ImpParser.html#acc"><span class="id" title="variable">acc</span></a>) <span class="id" title="var">steps&acute;</span> <span class="id" title="var">xs&acute;</span><br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="many"><span class="id" title="definition">many</span></a> {<span class="id" title="var">T</span>} (<span class="id" title="var">p</span> : <a class="idref" href="ImpParser.html#parser"><span class="id" title="definition">parser</span></a> <a class="idref" href="ImpParser.html#T"><span class="id" title="variable">T</span></a>) (<span class="id" title="var">steps</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="ImpParser.html#parser"><span class="id" title="definition">parser</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#T"><span class="id" title="variable">T</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="ImpParser.html#many_helper"><span class="id" title="definition">many_helper</span></a> <a class="idref" href="ImpParser.html#p"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="firstExpect"><span class="id" title="definition">firstExpect</span></a> {<span class="id" title="var">T</span>} (<span class="id" title="var">t</span> : <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) (<span class="id" title="var">p</span> : <a class="idref" href="ImpParser.html#parser"><span class="id" title="definition">parser</span></a> <a class="idref" href="ImpParser.html#T"><span class="id" title="variable">T</span></a>) : <a class="idref" href="ImpParser.html#parser"><span class="id" title="definition">parser</span></a> <a class="idref" href="ImpParser.html#T"><span class="id" title="variable">T</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">xs</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">xs&acute;</span> ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string_dec"><span class="id" title="definition">string_dec</span></a> <span class="id" title="var">x</span> <a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="ImpParser.html#p"><span class="id" title="variable">p</span></a> <span class="id" title="var">xs&acute;</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> ("expected '" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> <a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> "'.")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒  <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> ("expected '" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> <a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> "'.")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="expect"><span class="id" title="definition">expect</span></a> (<span class="id" title="var">t</span> : <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) : <a class="idref" href="ImpParser.html#parser"><span class="id" title="definition">parser</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> <a class="idref" href="ImpParser.html#t"><span class="id" title="variable">t</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">xs</span> ⇒ <a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab461"></a><h3 class="section">Imp的一个递归下降的解析器</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="parseIdentifier"><span class="id" title="definition">parseIdentifier</span></a> (<span class="id" title="var">symtable</span> :<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>→<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="ImpParser.html#optionE"><span class="id" title="inductive">optionE</span></a> (<a class="idref" href="SfLib.html#id"><span class="id" title="inductive">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Expected identifier"<br/>
| <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">xs&acute;</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ImpParser.html#isLowerAlpha"><span class="id" title="definition">isLowerAlpha</span></a> (<a class="idref" href="ImpParser.html#list_of_string"><span class="id" title="definition">list_of_string</span></a> <span class="id" title="var">x</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="SfLib.html#Id"><span class="id" title="constructor">Id</span></a> (<a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <span class="id" title="var">x</span>)<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">xs&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> ("Illegal identifier:'" <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#6c3bece79abbc48868e7371c2d2fa55c"><span class="id" title="notation">++</span></a> "'")<br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="parseNumber"><span class="id" title="definition">parseNumber</span></a> (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) : <a class="idref" href="ImpParser.html#optionE"><span class="id" title="inductive">optionE</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span> <br/>
| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#145bedf8a5d4a541831f3f70db03085c"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Expected number"<br/>
| <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a><span class="id" title="var">xs&acute;</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="ImpParser.html#isDigit"><span class="id" title="definition">isDigit</span></a> (<a class="idref" href="ImpParser.html#list_of_string"><span class="id" title="definition">list_of_string</span></a> <span class="id" title="var">x</span>) <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">d</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Peano.html#697e4695610f677ae98a52af81f779d2"><span class="id" title="notation">×</span></a> <a class="idref" href="ImpParser.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#nat_of_ascii"><span class="id" title="definition">nat_of_ascii</span></a> <a class="idref" href="ImpParser.html#d"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Peano.html#9482aae3d3b06e249765c1225dbb8cbb"><span class="id" title="notation">-</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.Ascii.html#nat_of_ascii"><span class="id" title="definition">nat_of_ascii</span></a> "0"%<span class="id" title="var">char</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="ImpParser.html#list_of_string"><span class="id" title="definition">list_of_string</span></a> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">xs&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Expected number"<br/>
<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="parsePrimaryExp"><span class="id" title="definition">parsePrimaryExp</span></a> (<span class="id" title="var">steps</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <span class="id" title="var">symtable</span> (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) <br/>
&nbsp;&nbsp;&nbsp;: <a class="idref" href="ImpParser.html#optionE"><span class="id" title="inductive">optionE</span></a> (<a class="idref" href="Imp.html#aexp"><span class="id" title="inductive">aexp</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <a class="idref" href="ImpParser.html#parseIdentifier"><span class="id" title="definition">parseIdentifier</span></a> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#AId"><span class="id" title="constructor">AId</span></a> <span class="id" title="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <a class="idref" href="ImpParser.html#parseNumber"><span class="id" title="definition">parseNumber</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#ANum"><span class="id" title="constructor">ANum</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a>  <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "(" (<a class="idref" href="ImpParser.html#parseSumExp"><span class="id" title="definition">parseSumExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">u</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <a class="idref" href="ImpParser.html#expect"><span class="id" title="definition">expect</span></a> ")" <span class="id" title="var">rest</span> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">with</span> <a name="parseProductExp"><span class="id" title="definition">parseProductExp</span></a> (<span class="id" title="var">steps</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <span class="id" title="var">symtable</span> (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>)  :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#parsePrimaryExp"><span class="id" title="definition">parsePrimaryExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">es</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#many"><span class="id" title="definition">many</span></a> (<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "*" (<a class="idref" href="ImpParser.html#parsePrimaryExp"><span class="id" title="definition">parsePrimaryExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>)) <span class="id" title="var">steps&acute;</span> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> <a class="idref" href="Imp.html#AMult"><span class="id" title="constructor">AMult</span></a> <span class="id" title="var">es</span> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">with</span> <a name="parseSumExp"><span class="id" title="definition">parseSumExp</span></a> (<span class="id" title="var">steps</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <span class="id" title="var">symtable</span> (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>)  :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#parseProductExp"><span class="id" title="definition">parseProductExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">es</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#many"><span class="id" title="definition">many</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">xs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "+" (<a class="idref" href="ImpParser.html#parseProductExp"><span class="id" title="definition">parseProductExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">),</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "-" (<a class="idref" href="ImpParser.html#parseProductExp"><span class="id" title="definition">parseProductExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">),</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">steps&acute;</span> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e0</span> <span class="id" title="var">term</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#term"><span class="id" title="variable">term</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a>  <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Imp.html#APlus"><span class="id" title="constructor">APlus</span></a> <a class="idref" href="ImpParser.html#e0"><span class="id" title="variable">e0</span></a> <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="Imp.html#AMinus"><span class="id" title="constructor">AMinus</span></a> <a class="idref" href="ImpParser.html#e0"><span class="id" title="variable">e0</span></a> <span class="id" title="var">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">es</span> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a>         <br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="parseAExp"><span class="id" title="definition">parseAExp</span></a> := <a class="idref" href="ImpParser.html#parseSumExp"><span class="id" title="definition">parseSumExp</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="parseAtomicExp"><span class="id" title="definition">parseAtomicExp</span></a> (<span class="id" title="var">steps</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">symtable</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>→<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>)  :=<br/>
<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a>    <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">u</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <a class="idref" href="ImpParser.html#expect"><span class="id" title="definition">expect</span></a> "true" <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#BTrue"><span class="id" title="constructor">BTrue</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">u</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <a class="idref" href="ImpParser.html#expect"><span class="id" title="definition">expect</span></a> "false" <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#BFalse"><span class="id" title="constructor">BFalse</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "not" (<a class="idref" href="ImpParser.html#parseAtomicExp"><span class="id" title="definition">parseAtomicExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#BNot"><span class="id" title="constructor">BNot</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "(" (<a class="idref" href="ImpParser.html#parseConjunctionExp"><span class="id" title="definition">parseConjunctionExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">u</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <a class="idref" href="ImpParser.html#expect"><span class="id" title="definition">expect</span></a> ")" <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a> <a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <a class="idref" href="ImpParser.html#parseProductExp"><span class="id" title="definition">parseProductExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">e&acute;</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "==" (<a class="idref" href="ImpParser.html#parseAExp"><span class="id" title="definition">parseAExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <span class="id" title="var">rest</span> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#BEq"><span class="id" title="constructor">BEq</span></a> <span class="id" title="var">e</span> <span class="id" title="var">e&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">e&acute;</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "&lt;=" (<a class="idref" href="ImpParser.html#parseAExp"><span class="id" title="definition">parseAExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <span class="id" title="var">rest</span> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#BLe"><span class="id" title="constructor">BLe</span></a> <span class="id" title="var">e</span> <span class="id" title="var">e&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Expected '==' or '&lt;=' after arithmetic expression"<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a><br/>
<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">with</span> <a name="parseConjunctionExp"><span class="id" title="definition">parseConjunctionExp</span></a> (<span class="id" title="var">steps</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">symtable</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>→<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>)   :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#parseAtomicExp"><span class="id" title="definition">parseAtomicExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">es</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#many"><span class="id" title="definition">many</span></a> (<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "&amp;&amp;" (<a class="idref" href="ImpParser.html#parseAtomicExp"><span class="id" title="definition">parseAtomicExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>)) <span class="id" title="var">steps&acute;</span> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> <a class="idref" href="Imp.html#BAnd"><span class="id" title="constructor">BAnd</span></a> <span class="id" title="var">es</span> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="parseBExp"><span class="id" title="definition">parseBExp</span></a> := <a class="idref" href="ImpParser.html#parseConjunctionExp"><span class="id" title="definition">parseConjunctionExp</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="parseSimpleCommand"><span class="id" title="definition">parseSimpleCommand</span></a> (<span class="id" title="var">steps</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">symtable</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>→<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">u</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <a class="idref" href="ImpParser.html#expect"><span class="id" title="definition">expect</span></a> "SKIP" <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#a0c711115537068b54b88d30c8f28d4f"><span class="id" title="notation">SKIP</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "IF" (<a class="idref" href="ImpParser.html#parseBExp"><span class="id" title="definition">parseBExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a>  <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "THEN" (<a class="idref" href="ImpParser.html#parseSequencedCommand"><span class="id" title="definition">parseSequencedCommand</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">c&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "ELSE" (<a class="idref" href="ImpParser.html#parseSequencedCommand"><span class="id" title="definition">parseSequencedCommand</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">u</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;&acute;&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#expect"><span class="id" title="definition">expect</span></a> "END" <span class="id" title="var">rest&acute;&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#c08e4e0f4c2b892dba2b9bd8d65bc968"><span class="id" title="notation">IFB</span></a> <span class="id" title="var">e</span> <a class="idref" href="Imp.html#c08e4e0f4c2b892dba2b9bd8d65bc968"><span class="id" title="notation">THEN</span></a> <span class="id" title="var">c</span> <a class="idref" href="Imp.html#c08e4e0f4c2b892dba2b9bd8d65bc968"><span class="id" title="notation">ELSE</span></a> <span class="id" title="var">c&acute;</span> <a class="idref" href="Imp.html#c08e4e0f4c2b892dba2b9bd8d65bc968"><span class="id" title="notation">FI</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;&acute;&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a><span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "WHILE" (<a class="idref" href="ImpParser.html#parseBExp"><span class="id" title="definition">parseBExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> "DO" (<a class="idref" href="ImpParser.html#parseSequencedCommand"><span class="id" title="definition">parseSequencedCommand</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">u</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a><span class="id" title="var">rest&acute;&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#expect"><span class="id" title="definition">expect</span></a> "END" <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Imp.html#026553ab2a284931075228151d7b828d"><span class="id" title="notation">WHILE</span></a> <span class="id" title="var">e</span> <a class="idref" href="Imp.html#026553ab2a284931075228151d7b828d"><span class="id" title="notation">DO</span></a> <span class="id" title="var">c</span> <a class="idref" href="Imp.html#026553ab2a284931075228151d7b828d"><span class="id" title="notation">END</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#parseIdentifier"><span class="id" title="definition">parseIdentifier</span></a> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">e</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> ":=" (<a class="idref" href="ImpParser.html#parseAExp"><span class="id" title="definition">parseAExp</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">i</span> <a class="idref" href="Imp.html#e5f90bd3e877d9e98ec926ce1508c97d"><span class="id" title="notation">::=</span></a> <span class="id" title="var">e</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<br/>
<span class="id" title="keyword">with</span> <a name="parseSequencedCommand"><span class="id" title="definition">parseSequencedCommand</span></a> (<span class="id" title="var">steps</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">symtable</span>:<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>→<a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="ImpParser.html#steps"><span class="id" title="variable">steps</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="ImpParser.html#NoneE"><span class="id" title="constructor">NoneE</span></a> "Too many recursive calls"<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">steps&acute;</span> ⇒ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">&lt;==</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#parseSimpleCommand"><span class="id" title="definition">parseSimpleCommand</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a> <a class="idref" href="ImpParser.html#xs"><span class="id" title="variable">xs</span></a><a class="idref" href="ImpParser.html#794724d553caae0f0b39175ec4342486"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">DO</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">(</span></a><span class="id" title="var">c&acute;</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">)</span></a> <a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">&lt;--</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#firstExpect"><span class="id" title="definition">firstExpect</span></a> ";;" (<a class="idref" href="ImpParser.html#parseSequencedCommand"><span class="id" title="definition">parseSequencedCommand</span></a> <span class="id" title="var">steps&acute;</span> <a class="idref" href="ImpParser.html#symtable"><span class="id" title="variable">symtable</span></a>) <span class="id" title="var">rest</span><a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span> <a class="idref" href="Imp.html#c867beb4aa2ff73336c95a0d45cad704"><span class="id" title="notation">;;</span></a> <span class="id" title="var">c&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest&acute;</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#d9734cb41398dde8ca4b5a0afa669ca6"><span class="id" title="notation">OR</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ImpParser.html#SomeE"><span class="id" title="constructor">SomeE</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="bignumber"><span class="id" title="definition">bignumber</span></a> := 1000.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="parse"><span class="id" title="definition">parse</span></a> (<span class="id" title="var">str</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="ImpParser.html#optionE"><span class="id" title="inductive">optionE</span></a> (<a class="idref" href="Imp.html#com"><span class="id" title="inductive">com</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="ImpParser.html#token"><span class="id" title="definition">token</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">tokens</span> := <a class="idref" href="ImpParser.html#tokenize"><span class="id" title="definition">tokenize</span></a> <a class="idref" href="ImpParser.html#str"><span class="id" title="variable">str</span></a> <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="ImpParser.html#parseSequencedCommand"><span class="id" title="definition">parseSequencedCommand</span></a> <a class="idref" href="ImpParser.html#bignumber"><span class="id" title="definition">bignumber</span></a> (<a class="idref" href="ImpParser.html#build_symtable"><span class="id" title="definition">build_symtable</span></a> <a class="idref" href="ImpParser.html#tokens"><span class="id" title="variable">tokens</span></a> 0) <a class="idref" href="ImpParser.html#tokens"><span class="id" title="variable">tokens</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab462"></a><h1 class="section">例子</h1>

</div>
<div class="code">

<br/>

<br/>

<br/>

<br/>
</div>

<div class="doc">
 
</div>
<div class="code">

<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>